"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n,r){var o=function(e,t){var r=new n;r.load(e,t)},i=e.module,a=e.define;if(i!==r&&i.exports?i.exports=o:"function"==typeof a&&a.amd&&e.define(t,[],o),e[t]!==r)throw Error("Loady appears to be already registered with the global object, therefore the module has not be registered.");e[t]=o}(window,"loady",function(e){function t(e){var t=n(e)?h.call(e):"";return t===u.FUNCTION||t===u.GENERATOR}function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}function r(e){return"string"==typeof e||h.call(e)===u.STRING}var o="0.1.0",i={SOURCE_FILE:"data-loady-sourcefile"},a=e.document,l=a.head||a.getElementsByTagName("head")[0],s=/\.js$/,c=[],d=[],u={FUNCTION:"[object Function]",GENERATOR:"[object GeneratorFunction]",STRING:"[object String]"},h=e.Object.prototype.toString,f=e.Array.isArray;return function(){function n(){_classCallCheck(this,n),this.destroy()}return _createClass(n,[{key:"destroy",value:function(){this._callback=null,this._loaded=-1,this._called=null,this._files=null,this._length=0}},{key:"load",value:function(n,o){if(this.destroy(),!t(o))throw new e.Error("Loady: The callback function argument is not a valid function type.");if(r(n)&&(n=[n]),this._callback=o,!f(n))return void this.onCompleted(!1);if(0===n.length)return void this.onCompleted(!1);this._loaded=0,this._called=[],this._files=n,this._length=n.length;for(var i=0,a=this._length;a>i;i++){var l=n[i];l=l.replace(s,"")+".js";var u=c.indexOf(l);-1===u?this.loadScript(l):this.onCompleted(d[u])}}},{key:"loadScript",value:function(e){var t=a.createElement("SCRIPT");t.src=e,t.async=!0,t.setAttribute(i.SOURCE_FILE,e),t.addEventListener("load",this.onLoad.bind(this),!1),t.addEventListener("error",this.onLoad.bind(this),!1),l.appendChild(t),c.push(e)}},{key:"onCompleted",value:function(e){e!==!0&&(e=!1),this._loaded++,this._length===this._loaded&&(this._callback.apply(this,[this._called,e]),this.destroy())}},{key:"onLoad",value:function(e){var t=e.type,n="load"===t;if(n||"error"===t){var r=e.currentTarget||e.srcElement;if(!r)return;if(r.removeEventListener("load",this.onLoad,!1),r.removeEventListener("error",this.onLoad,!1),d.push(n),n){var o=r.getAttribute(i.SOURCE_FILE);this._called.push(o)}this.onCompleted(!0)}}},{key:"getVersion",value:function(){return o}}]),n}()}(window));
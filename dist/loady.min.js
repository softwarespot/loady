"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e,t,n,r){var o=function(e,t){var r=new n;r.load(e,t)},a=e.module,i=e.define;if(a!==r&&a.exports?a.exports=o:"function"==typeof i&&i.amd&&e.define(t,[],o),e[t]!==r)throw new e.Error("Loady appears to be already registered with the global object, therefore the module has not been registered.");e[t]=o}(window,"loady",function(e){function t(e){var t=n(e)?h.call(e):"";return t===u.FUNCTION||t===u.GENERATOR}function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}function r(e){return"string"==typeof e||h.call(e)===u.STRING}var o="0.1.0",a={SOURCE_FILE:"data-loady-sourcefile"},i=e.document,l=i.head||i.getElementsByTagName("head")[0],s=/\.js$/,c=[],d=[],u={FUNCTION:"[object Function]",GENERATOR:"[object GeneratorFunction]",STRING:"[object String]"},h=e.Object.prototype.toString,f=t(e.Array.isArray)?e.Array.isArray:function(e){return h.call(e)===u.ARRAY};return function(){function n(){_classCallCheck(this,n),this._destroy()}return _createClass(n,[{key:"load",value:function(n,o){if(!t(o))throw new e.Error("Loady: The callback function argument is not a valid function type.");if(this._destroy(),r(n)&&(n=[n]),this._callback=o,!f(n)||0===n.length)return void this._onCompleted(!1);this._loaded=0,this._called=[],this._files=n,this._length=n.length;for(var a=0,i=this._length;i>a;a++){var l=n[a].replace(s,"")+".js",u=c.indexOf(l);-1===u?this._loadScript(l):this._onCompleted(d[u])}}},{key:"_destroy",value:function(){this._callback=null,this._loaded=-1,this._called=null,this._files=null,this._length=0}},{key:"_loadScript",value:function(e){var t=i.createElement("script");t.src=e,t.async=!0,t.setAttribute(a.SOURCE_FILE,e),t.addEventListener("load",this._onLoad.bind(this),!1),t.addEventListener("error",this._onLoad.bind(this),!1),l.appendChild(t),c.push(e)}},{key:"_onCompleted",value:function(e){e!==!0&&(e=!1),this._loaded++,this._length===this._loaded&&(this._callback.apply(this,[this._called,e]),this._destroy())}},{key:"_onLoad",value:function(e){var t=e.type,n="load"===t;if(n||"error"===t){var r=e.currentTarget||e.srcElement;if(!r)return;if(r.removeEventListener("load",this._onLoad,!1),r.removeEventListener("error",this._onLoad,!1),n){var o=r.getAttribute(a.SOURCE_FILE),i=c.indexOf(o);-1!==i&&(d[i]=n),this._called.push(o)}this._onCompleted(!0)}}},{key:"getVersion",value:function(){return o}}]),n}()}(window));